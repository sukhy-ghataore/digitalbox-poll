(()=>{"use strict";var e,t={148:(e,t,n)=>{const i=window.wp.blocks,r=(window.wp.i18n,window.wp.blockEditor),s=window.wp.components,l=window.wp.element,o=window.wp.data,a=window.lodash,c=window.moment;var d=n.n(c);const p=window.ReactJSXRuntime,u={answer:"",image_url:""},h=JSON.parse('{"UU":"create-block/digitalbox-poll"}');(0,i.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:t}){const{poll_id:n,question:i,answers:c,expiry:h}=e,[x,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(!c.length){const e=(0,a.times)(2,(()=>({...u})));t({answers:e})}}),[]);const w=()=>{m(!x)},g=(e,n,i)=>{const r=[...c];(0,a.set)(r[i],e,n),t({answers:r})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.InspectorControls,{children:[(0,p.jsxs)(s.PanelBody,{title:"Poll Settings",children:[(0,p.jsx)(s.TextControl,{label:"Poll ID",help:"Enter a unique poll ID i.e BEST_ACTOR",value:n,onChange:e=>{e.length<45&&t({poll_id:e.toUpperCase()})}}),(0,p.jsx)(s.TextControl,{label:"Question",help:"Enter poll question",value:i,onChange:e=>{t({question:e})}}),h&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{children:(0,p.jsx)("strong",{children:"Poll expiry set at:"})}),(0,p.jsxs)("p",{children:[d()(h).format("MMMM Do YYYY, h:mm:ss a"),"."]}),(0,p.jsx)(s.Button,{style:{display:"block",marginBottom:"20px"},variant:"link",onClick:()=>{t({expiry:""})},children:"Clear"})]}),(0,p.jsx)(s.Button,{variant:"secondary",disabled:x,onClick:w,children:"Set Expiry Date/Time"}),x&&(0,p.jsx)(s.Modal,{title:"Set Poll Expiration Date",onRequestClose:w,children:(0,p.jsx)(s.DateTimePicker,{currentDate:h,onChange:e=>{const n=d()();d()(e).isBefore(n)?(0,o.dispatch)("core/notices").createNotice("error","You cannot select a old date and time",{isDismissable:!0,type:"snackbar"}):(t({expiry:e}),(0,o.dispatch)("core/notices").createNotice("success","Poll expiry is now set to: "+e,{isDismissable:!0,type:"snackbar"}))},is12Hour:!0})})]}),(0,p.jsxs)(s.PanelBody,{title:"Poll Answers",children:[c.length&&c.map(((e,n)=>(0,p.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,p.jsx)(s.TextControl,{value:e.answer,label:`Answer ${n+1}`,onChange:e=>g("answer",e,n)}),(0,p.jsx)(r.MediaUploadCheck,{children:(0,p.jsx)(r.MediaUpload,{onSelect:e=>{const t=e.sizes.thumbnail.url||e.url;g("image_url",t,n)},value:e.image_url||"",allowedTypes:["image"],render:({open:t})=>(0,p.jsx)("div",{children:e.image_url?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("figure",{children:(0,p.jsx)("img",{src:e.image_url,width:150,height:150,alt:"image"})}),(0,p.jsx)(s.Button,{isDestructive:!0,variant:"secondary",onClick:()=>g("image_url","",n),children:"Remove Image"})]}):(0,p.jsx)(s.Button,{variant:"secondary",onClick:t,children:"Select/Upload Image"})})})}),c.length>2&&(0,p.jsxs)(s.Button,{style:{marginTop:"10px"},isDestructive:!0,variant:"link",onClick:()=>(e=>{if(c.length>2){const n=[...c];n.splice(e,1),t({answers:n})}})(n),children:["Remove Answer ",n+1]})]},n))),c.length<5&&(0,p.jsx)(s.Button,{style:{marginTop:"20px"},variant:"primary",onClick:()=>{t({answers:[...c,{...u}]})},children:"Add New Answer"})]})]}),(0,p.jsx)("div",{...(0,r.useBlockProps)(),children:(0,p.jsx)(s.Placeholder,{label:`Poll: ${i}`,instructions:"Allows editors to embed interactive polls into entertainment news articles. Readers can vote on entertainment-related questions, and results will display in real-time without page refresh."})})]})},save:()=>null})}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,n,r,s)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,r,s]=e[d],o=!0,a=0;a<n.length;a++)(!1&s||l>=s)&&Object.keys(i.O).every((e=>i.O[e](n[a])))?n.splice(a--,1):(o=!1,s<l&&(l=s));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={199:0,615:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[l,o,a]=n,c=0;if(l.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(a)var d=a(i)}for(t&&t(n);c<l.length;c++)s=l[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=globalThis.webpackChunkdigitalbox_poll=globalThis.webpackChunkdigitalbox_poll||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=i.O(void 0,[615],(()=>i(148)));r=i.O(r)})();